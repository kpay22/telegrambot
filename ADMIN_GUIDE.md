# 记账机器人后台管理指南

## 功能概述

新增了后台管理页面和账单详情功能，提供直观的数据可视化界面。

## 文件说明

### 1. 后台管理页面 (`admin.php`)
- **功能**: 提供群组数据的可视化管理界面
- **访问方式**: `admin.php?token=群组token&group_id=群组ID`
- **主要功能**:
  - 数据概览（今日/本月统计）
  - 交易记录查看
  - 群组设置查看
  - 操作员管理

### 2. 账单详情页面 (`bill_detail.php`)
- **功能**: 显示指定日期的详细交易记录
- **访问方式**: `bill_detail.php?token=群组token&group_id=群组ID&date=日期`
- **主要功能**:
  - 按日期查看交易记录
  - 点击金额跳转到Telegram消息
  - 日期选择器
  - 详细统计信息

### 3. 账单详情按钮
- **位置**: 每个账单底部
- **格式**: `📊 [查看详情](链接)`
- **功能**: 点击可直接跳转到账单详情页面

## 使用方法

### 1. 获取访问链接

每个群组都有唯一的访问token，格式为：
```
token = md5(群组ID + 'telegram_bot_token_2024')
```

### 2. 访问管理页面

```
https://你的域名/admin.php?token=群组token&group_id=群组ID
```

### 3. 访问账单详情

```
https://你的域名/bill_detail.php?token=群组token&group_id=群组ID&date=2024-01-01
```

## 安全说明

- 访问基于群组ID和固定密钥生成的token
- 无需额外身份验证，但token难以猜测
- 建议在生产环境中添加更强的身份验证机制

## 界面特性

### 后台管理页面
- 📊 **数据概览**: 今日/本月入账、下发、手续费统计
- 📋 **交易记录**: 最近20笔交易的详细信息
- ⚙️ **群组设置**: 费率、汇率、激活状态等
- 👥 **操作员管理**: 查看所有操作员信息

### 账单详情页面
- 📅 **日期选择**: 查看任意日期的交易记录
- 🔗 **消息跳转**: 点击金额直接跳转到Telegram消息
- 📈 **详细统计**: 该日期的完整统计数据
- 🎨 **美观界面**: 响应式设计，支持移动端

## 技术实现

- **前端**: Bootstrap 5 + 自定义CSS
- **后端**: PHP + MySQL
- **安全**: 基于群组ID的token验证
- **响应式**: 支持桌面和移动设备

## 注意事项

1. 确保Web服务器支持PHP和MySQL
2. 账单详情按钮的链接需要正确的域名配置
3. 建议定期备份数据库
4. 生产环境建议添加HTTPS支持

## 测试方法

运行测试脚本获取访问链接：
```bash
php test_admin.php
```

这将显示群组信息和对应的管理页面链接。
